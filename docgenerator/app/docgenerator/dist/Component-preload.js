//@ui5-bundle docgenerator/Component-preload.js
sap.ui.predefine("docgenerator/Component", ["sap/ui/core/UIComponent","docgenerator/model/models"],(e,t)=>{"use strict";return e.extend("docgenerator.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("docgenerator/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("docgenerator.controller.App",{onInit(){}})});
sap.ui.predefine("docgenerator/controller/PrimaryView.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/ColumnListItem","sap/m/ObjectIdentifier","sap/m/Text","sap/m/VBox","sap/m/FormattedText","sap/m/MessageBox"],function(e,t,a,r,n,i,o,s){"use strict";return e.extend("docgenerator.controller.PrimaryView",{onInit:function(){var e=this.getView();var t=e.byId("idDocTable");t.setBusy(true);this._fallbackFetchAndBind();this.aFinalFilters=[]},_bindTableToFunction:function(){var e=this.getView();var t=e.byId("idDocTable");var l=this.getOwnerComponent().getModel();if(!t||!l){s.error("Table or OData V4 model not found.");return}var c="/generate";var u=new a({cells:[new r({title:"{displayName}",text:"{parameterName}"}),new i({items:[new n({text:"{parameterType}"}),new n({text:{parts:[{path:"defaultValue"}],formatter:function(e){return"Default: "+e}}}),new n({text:{parts:[{path:"parameterValue"}],formatter:function(e){return"Value: "+e}}}),new n({text:{parts:[{path:"isDefault"}],formatter:function(e){return e?"Is Default: true":""}}}),new o({htmlText:"{description}"})]})]});t.unbindItems();t.bindItems({path:c,parameters:{operationMode:"Server"},template:u});var d=t.getBinding("items");if(!d){this._fallbackFetchAndBind();return}var m=function(){try{var e=typeof d.getCurrentContexts==="function"?d.getCurrentContexts():[];var t=e&&e.length?e.length:0;if(t===0){d.detachChange(m);this._fallbackFetchAndBind()}else{d.detachChange(m)}}catch(e){d.detachChange(m);this._fallbackFetchAndBind()}}.bind(this);if(typeof d.attachChange==="function"){d.attachChange(m)}else{setTimeout(function(){this._fallbackFetchAndBind()}.bind(this),800)}},onParamNameFilterSelectionFinish:function(e){var t=e.getSource();var a=t.getSelectedItems();var r=a.map(function(e){return e.getKey()});var n=this.getView().byId("idDocTable");var i=n.getBinding("items");if(i){if(r.length>0){var o=r.map(function(e){return new sap.ui.model.Filter("parameterName",sap.ui.model.FilterOperator.EQ,e)});var s=new sap.ui.model.Filter(o,false);i.filter(s)}else{i.filter([])}}},onCustomerEditFilterSelectionFinish:function(e){var t=e.getSource();var a=t.getSelectedItems();var r=a.map(function(e){if(e.getKey()==="true"||e.getKey()===0){return true}else if(e.getKey()==="false"||e.getKey()===1){return false}return e.getKey()});var n=this.getView().byId("idDocTable");var i=n.getBinding("items");if(i){if(r.length>0){var o=r.map(function(e){return new sap.ui.model.Filter("isCustomerEditable",sap.ui.model.FilterOperator.EQ,e);aFinalFilters.push(new sap.ui.model.Filter({filters:o}))});var s=new sap.ui.model.Filter(o,false);i.filter(s)}else{i.filter([])}}},_fallbackFetchAndBind:async function(){var e=this.getView();var r=e.byId("idDocTable");if(!r){s.error("Table not found.");return}var n="/odata/v4/generate-document/generate";await fetch(n,{method:"GET",credentials:"same-origin"}).then(function(e){if(!e.ok){throw new Error("Network response was not ok: "+e.status)}return e.json()}).then(async function(a){var n;if(Array.isArray(a)){n=a}else if(a&&Array.isArray(a.value)){n=a.value}else if(a&&typeof a==="object"){n=[a]}else{n=[]}debugger;var i=new t({items:n});e.setModel(i,"docs");r.setBusy(false);var o=this.getView().getModel("docs");var s=o.getProperty("/items")||[];var l={};var c={};var u=s.reduce(function(e,t){var a=t.isCustomerEditable;if(a!==undefined&&!l[a]){l[a]=true;e.push({key:a,text:String(a)})}return e},[]);var d=await s.reduce(function(e,t){var a=t.parameterName;if(a!==undefined&&!c[a]){c[a]=true;e.push({key:a,text:String(a.replace(/\./g," "))})}return e},[]);var m=new sap.ui.model.json.JSONModel({customerEditableOptions:u,parameterNameOptions:d});this.getView().setModel(m,"filter")}.bind(this)).catch(function(n){s.error(n.message||"Failed to call generate function");var i=new t({items:[]});e.setModel(i,"docs");r.unbindItems();r.bindItems({path:"docs>/items",template:new a})}.bind(this))},onGeneratePress:function(){var e=this.getView();var t=e.byId("idDocTable");t.setBusy(true);var a=this.getView().byId("parameterName").getSelectedItems();var r=a.map(function(e){return e.getKey()});var n=this.getView().byId("isCustomerEditable").getSelectedItems();var i=n.map(function(e){if(e.getKey()==="true"||e.getKey()===0){return true}else if(e.getKey()==="false"||e.getKey()===1){return false}return e.getKey()});var o=r.length>0?r.join(","):" ";var l=i.length===1?i[0]:" ";var c={parameterName:[o],isCustomerEditable:l};var u="/odata/v4/generate-document/getDocumentCreated?params="+encodeURIComponent(JSON.stringify(c));fetch(u,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(async function(e){if(!e.ok){throw new Error("Network response was not ok: "+e.status)}const t=await e.blob();const a=e.headers.get("Content-Disposition")||"";let r="Ariba Config Document.docx";const n=a.match(/filename\\*=?UTF-8''([^;\\n\\r]+)/i);const i=a.match(/filename=\"?([^\";]+)\"?/i);if(n&&n[1])r=decodeURIComponent(n[1]);else if(i&&i[1])r=i[1];const o=URL.createObjectURL(t);const s=document.createElement("a");s.href=o;s.download=r;document.body.appendChild(s);s.click();s.remove();URL.revokeObjectURL(o)}).then(function(e){console.log("Document created: "+e);s.success("Document created: ");t.setBusy(false)}.bind(this)).catch(function(e){s.error(e.message||"Failed to call create document");t.setBusy(false)}.bind(this))}})});
sap.ui.predefine("docgenerator/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"docgenerator/fragments/configDescription.fragment.xml":'<core:FragmentDefinition xmlns:layout="sap.ui.layout"\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:form="sap.ui.layout.form"\r\n><VBox class="sapUiSmallMargin"><Popover title="{i18n>configDescriptionTitle}" placement="Bottom"\r\n            showHeader="true"\r\n            showArrow="true"\r\n            contentWidth="400px"><VBox class="sapUiSmallMargin"><FormattedText htmlText=""/></VBox></Popover></VBox></core:FragmentDefinition>',
	"docgenerator/i18n/i18n.properties":'# Page / Titles\ntitle=Config Table\n\n# Table column headers\nDisplayName=Display Name\nParameterType=Parameter Type\nDefaultValue=Default Value\nParameterValue=Parameter Value\nCustomerEditable=Customer Editable\nDescription=Description\nparameterName=Parameter Name\n\n# Labels used inside rows (useful if you want translations for the literal prefixes)\nDefaultLabel=Default: {0}\nValueLabel=Value: {0}\nIsDefaultLabel=Is Default\n\n# Buttons\ngenerateButton=Generate Document\nrefreshButton=Refresh Data\nclearFiltersButton=Clear Filters\n\n# Misc / fallback\nnoDataText=No documents found\n',
	"docgenerator/manifest.json":'{"_version":"1.76.0","sap.cloud":{"public":true,"service":"docgenerator.service"},"sap.app":{"id":"docgenerator","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.18.7","toolsId":"f2f43da3-2c67-4cf0-932f-102e38ac76be"},"dataSources":{"mainService":{"uri":"/odata/v4/generate-document/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.140.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"docgenerator.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"docgenerator.view","async":true},"routes":[{"name":"RoutePrimaryView","pattern":":?query:","target":["TargetPrimaryView"]}],"targets":{"TargetPrimaryView":{"id":"PrimaryView","name":"PrimaryView"}}},"rootView":{"viewName":"docgenerator.view.App","type":"XML","id":"App","async":true}}}',
	"docgenerator/view/App.view.xml":'<mvc:View controllerName="docgenerator.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"docgenerator/view/PrimaryView.view.xml":'<mvc:View\n    xmlns:filterbar="sap.ui.comp.filterbar"\n    xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"\n    controllerName="docgenerator.controller.PrimaryView"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n><Page\n        id="page"\n        showHeader="false"\n    ><VBox fitContainer="true"><filterbar:FilterBar\n                id="idsFilterBar"\n                search="onFilterSearch"\n                useToolbar="true"\n                showRestoreButton="true"\n            ><filterbar:filterGroupItems><filterbar:FilterGroupItem\n                        groupName="G1"\n                        name="isCustomerEditable"\n                        label="{i18n>CustomerEditable}"\n                        visibleInFilterBar="true"\n                    ><filterbar:control><MultiComboBox\n                                    id="isCustomerEditable"\n                                    items="{filter>/customerEditableOptions}"\n                                    selectionFinish="onCustomerEditFilterSelectionFinish"\n                                ><core:Item\n                                        key="{filter>key}"\n                                        text="{filter>text}"\n                                    /></MultiComboBox></filterbar:control></filterbar:FilterGroupItem><filterbar:FilterGroupItem\n                        groupName="G2"\n                        name="parameterName"\n                        label="{i18n>parameterName}"\n                        visibleInFilterBar="true"\n                    ><filterbar:control><MultiComboBox\n                                    id="parameterName"\n                                    items="{filter>/parameterNameOptions}"\n                                    selectionFinish="onParamNameFilterSelectionFinish"\n                                ><core:Item\n                                        key="{filter>key}"\n                                        text="{filter>text}"\n                                    /></MultiComboBox></filterbar:control></filterbar:FilterGroupItem></filterbar:filterGroupItems></filterbar:FilterBar><OverflowToolbar style="Clear"><Title\n                    id="docTitle"\n                    text="{i18n>title}"\n                /><ToolbarSpacer /><Button\n                    text="{i18n>generateButton}"\n                    press="onGeneratePress"\n                    class="sapUiSmallMarginEnd"\n                    icon="sap-icon://ai"\n                /></OverflowToolbar><Table\n                id="idDocTable"\n                items="{docs>/items}"\n                inset="false"\n                growing="true"\n                growingThreshold="10"\n                mode="MultiSelect"\n            ><columns><Column><Text text="{i18n>DisplayName}" /></Column><Column><Text text="{i18n>ParameterType}" /></Column><Column><Text text="{i18n>DefaultValue}" /></Column><Column><Text text="{i18n>ParameterValue}" /></Column><Column><Text text="{i18n>CustomerEditable}" /></Column></columns><items><ColumnListItem><cells><ObjectIdentifier\n                                title="{= ${docs>displayName} ? ${docs>displayName} : ${docs>parameterName}}"\n                                text="{docs>parameterName}"\n                                titleActive="true"\n                            /><Text text="{docs>parameterType}" /><Text text="{docs>defaultValue}" /><Text text="{docs>parameterValue}" /><Text text="{docs>isCustomerEditable}" /></cells></ColumnListItem></items></Table></VBox></Page></mvc:View>\n'
});
//# sourceMappingURL=Component-preload.js.map
