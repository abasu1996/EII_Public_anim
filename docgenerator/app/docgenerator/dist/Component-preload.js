//@ui5-bundle docgenerator/Component-preload.js
sap.ui.predefine("docgenerator/Component", ["sap/ui/core/UIComponent","docgenerator/model/models"],(e,t)=>{"use strict";return e.extend("docgenerator.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("docgenerator/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("docgenerator.controller.App",{onInit(){}})});
sap.ui.predefine("docgenerator/controller/PrimaryView.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/ColumnListItem","sap/m/ObjectIdentifier","sap/m/Text","sap/m/VBox","sap/m/FormattedText","sap/m/MessageBox","sap/ui/core/Fragment","sap/m/MessageToast"],function(e,t,n,a,i,r,o,s,l,d){"use strict";return e.extend("docgenerator.controller.PrimaryView",{onInit:function(){this.oView=this.getView();this.oModel=this.getOwnerComponent().getModel();this.aFinalFilters=[]},onFileUpload:function(e){var t=e},onLoadCsvHeaders:function(){debugger;var e=this.getView().byId("csvUploader");var t=e.oFileUpload;var n=t.files[0];if(n){var a=new FileReader;a.onload=function(e){var t=e.target.result;var n=t.split("\n");if(n.length>0){var a=n[0].split(",");var i=a.map(function(e){return{key:e.trim(),text:e.trim()}});var r=new sap.ui.model.json.JSONModel({csvHeaders:i});this.getView().setModel(r,"csv");console.log(i);d.show("CSV headers loaded successfully.")}}.bind(this);a.onerror=function(e){s.error("Error reading file: "+e.target.error.message)}}},onTaxConfigPress:function(){if(!this._oTaxConfigDialog){this._oTaxConfigDialog=sap.ui.xmlfragment("docgenerator.fragments.TaxConfig",this);this.getView().addDependent(this._oTaxConfigDialog)}this._oTaxConfigDialog.open()},onGuidedBuyingPress:function(){var e="docgenerator.fragments.guidedBuying";if(!this._pGuidedBuyingDialog){this._pGuidedBuyingDialog=l.load({name:e,controller:this}).then(function(e){this.getView().addDependent(e);return e}.bind(this)).catch(function(e){console.error("Dialog load error",e);this._pGuidedBuyingDialog=null}.bind(this))}this._pGuidedBuyingDialog.then(function(e){e.open()})},onCloseFieldConfig:function(){var e=this;if(this._pGuidedBuyingDialog){this._pGuidedBuyingDialog.then(function(e){e.close()})}},onFieldConfigPress:function(e){var t=this.getView();var n=this;if(!n._pFieldConfigDialog){n._pFieldConfigDialog=l.load({name:"docgenerator.fragments.FieldConfig",id:t.getId(),controller:this}).then(function(e){t.addDependent(e);return e}).catch(function(e){console.error("FieldConfig fragment load error:",e);d.show("Unable to open Field Configuration (see console).");this._pFieldConfigDialog=null;throw e}.bind(this))}n._pFieldConfigDialog.then(function(e){e.open()}).catch(function(){})},_bindTableToFunction:async function(){var e=this.getView();var t=e.byId("idDocTable");var l=this.getOwnerComponent().getModel();if(!t||!l){s.error("Table or OData V4 model not found.");return}var d="/generate";var c=new n({cells:[new a({title:"{displayName}",text:"{parameterName}"}),new r({items:[new i({text:"{parameterType}"}),new i({text:{parts:[{path:"defaultValue"}],formatter:function(e){return"Default: "+e}}}),new i({text:{parts:[{path:"parameterValue"}],formatter:function(e){return"Value: "+e}}}),new i({text:{parts:[{path:"isDefault"}],formatter:function(e){return e?"Is Default: true":""}}}),new o({htmlText:"{description}"})]})]});var u=await l.bindContext("/generateDocument.generate(...)");await u.invoke();const f=u.getBoundContext()?.getObject();console.log(f);t.bindContext().execute();t.bindItems({path:d,parameters:{operationMode:"Server"},template:c});var g=t.getBinding("items");if(!g){this._fallbackFetchAndBind();return}var p=function(){try{var e=typeof g.getCurrentContexts==="function"?g.getCurrentContexts():[];var t=e&&e.length?e.length:0;if(t===0){g.detachChange(p);this._fallbackFetchAndBind()}else{g.detachChange(p)}}catch(e){g.detachChange(p);this._fallbackFetchAndBind()}}.bind(this);if(typeof g.attachChange==="function"){g.attachChange(p)}else{setTimeout(function(){this._fallbackFetchAndBind()}.bind(this),800)}},onParamNameFilterSelectionFinish:function(e){var t=e.getSource();var n=t.getSelectedItems();var a=n.map(function(e){return e.getKey()});var i=this.getView().byId("idDocTable");var r=i.getBinding("items");if(r){if(a.length>0){var o=a.map(function(e){return new sap.ui.model.Filter("parameterName",sap.ui.model.FilterOperator.EQ,e)});var s=new sap.ui.model.Filter(o,false);r.filter(s)}else{r.filter([])}}},onCustomerEditFilterSelectionFinish:function(e){var t=e.getSource();var n=t.getSelectedItems();var a=n.map(function(e){if(e.getKey()==="true"||e.getKey()===0){return true}else if(e.getKey()==="false"||e.getKey()===1){return false}return e.getKey()});var i=this.getView().byId("idDocTable");var r=i.getBinding("items");if(r){if(a.length>0){var o=a.map(function(e){return new sap.ui.model.Filter("isCustomerEditable",sap.ui.model.FilterOperator.EQ,e);aFinalFilters.push(new sap.ui.model.Filter({filters:o}))});var s=new sap.ui.model.Filter(o,false);r.filter(s)}else{r.filter([])}}},_fallbackFetchAndBind:async function(){var e=this.getView();var a=e.byId("idDocTable");if(!a){s.error("Table not found.");return}var i="isCustomerEditable eq true and (parameterName eq 'Application.Approvable.AllowApprovalOfDeniedApprovable' or parameterName eq 'Application.Approvable.AllowedForExternalApproval' )";var r=await this.oModel.bindContext("/generateDocument.generate(...)");r.invoke().then(async function(n){const i=r.getBoundContext().getObject();var o=new t({items:i.value});e.setModel(o,"docs");a.setBusy(false);var s=this.getView().getModel("docs");var l=s.getProperty("/items")||[];var d={};var c={};var u=l.reduce(function(e,t){var n=t.isCustomerEditable;if(n!==undefined&&!d[n]){d[n]=true;e.push({key:n,text:String(n)})}return e},[]);var f=await l.reduce(function(e,t){var n=t.parameterName;if(n!==undefined&&!c[n]){c[n]=true;e.push({key:n,text:String(n.replace(/\./g," "))})}return e},[]);var g=new sap.ui.model.json.JSONModel({customerEditableOptions:u,parameterNameOptions:f});this.getView().setModel(g,"filter")}.bind(this)).catch(function(i){s.error(i.message||"Failed to call generate function");var r=new t({items:[]});e.setModel(r,"docs");a.unbindItems();a.bindItems({path:"docs>/items",template:new n})}.bind(this))},onGeneratePress:async function(){this.byId("page").setBusy(true);const e={value:{docpayload:{projectName:this.byId("inpProjectName").getValue(),customerName:this.byId("inpCustomerName").getValue(),projectIdentification:[{label:"Project Name",value:this.byId("inpProjectName").getValue()},{label:"Customer Name",value:this.byId("inpCustomerName").getValue()},{label:"SAP Ariba Project Manager",value:this.byId("inpAribaPM").getValue()}],revisionHistory:[{author:this.byId("inpAribaPM").getValue(),version:"0.1",date:"2025-10-07T00:00:00Z",status:"Draft",location:"<Link to document>"}],businessProcessOverview:`This Project ${this.byId("inpProjectName").getValue()?this.byId("inpProjectName").getValue():"<Project Name>"} covers configuration between ${this.byId("inpCustomerName").getValue()?this.byId("inpCustomerName").getValue():"<Customer Name>"}  and SAP Ariba services...`,functionalOverview:`High-level description of the solution components...`,alternativesConsidered:`- Option A: ...\n- Option B: ...`,businessBenefit:`Expected cost savings and automated ordering...`,assumptions:`Customer provides X data; network access available.`,relationshipToOtherDocumentation:"See Leading Practice Functional Design Document for core details.",functionalDesign:"Detailed design of the RICEFWD objects, mapping, API calls...",constraints:["No changes to S/4 master data","Ariba API rate limits are 1000 calls/min"],tasksBySapAriba:[{task:"Develop connector",description:"Build and test the Ariba connector.",dependency:"Customer test data"}],tasksByCustomer:[],tasksByPartner:[],csvGuidedBuyingParameters:[],sapEditableParameters:[],customerEditableParameters:[]}}};var t="/generateDocument.combinedDocGenerate(...)";var n=await this.oModel.bindContext(t);Object.entries(e).forEach(([e,t])=>{n.setParameter(e,t)});await n.invoke();if(n.getBoundContext().getObject()){const e=n.getBoundContext().getObject();const t=this._bufferDownload(e);d.show("Document generated successfully.");this.byId("page").setBusy(false)}else{s.error("Document generation failed.");this.byId("page").setBusy(false)}let a="Ariba Config Document.docx"},_bufferDownload:async function(e,t="Project Functional Specification Document.docx",n="application/vnd.openxmlformats-officedocument.wordprocessingml.document"){{if(!e||!e.buffer){if(e&&e.fileMessage){s.information(e.fileMessage);this.byId("page").setBusy(false);return}else{throw new Error("No buffer found in payload")}}const a=e.buffer;let i;if(a instanceof ArrayBuffer){i=new Uint8Array(a);console.log(i)}else if(ArrayBuffer.isView(a)){i=new Uint8Array(a.buffer||a);console.log(i)}else if(a&&a.type==="Buffer"&&Array.isArray(a.data)){i=new Uint8Array(a.data);console.log(i)}else if(Array.isArray(a)){i=new Uint8Array(a);console.log(i)}else if(typeof a==="string"){const e=a.indexOf("base64,")>=0?a.split("base64,")[1]:a;const t=atob(e);const n=t.length;i=new Uint8Array(n);for(let e=0;e<n;e++){i[e]=t.charCodeAt(e)}}else if(a&&(a.data instanceof ArrayBuffer||Array.isArray(a.data)||ArrayBuffer.isView(a.data))){const e=a.data;if(e instanceof ArrayBuffer)i=new Uint8Array(e);else if(ArrayBuffer.isView(e))i=new Uint8Array(e.buffer);else i=new Uint8Array(e)}else{throw new Error("Unsupported buffer format: "+Object.prototype.toString.call(a))}const r=new Blob([i],{type:n});const o=URL.createObjectURL(r);const l=document.createElement("a");l.href=o;l.download=t;document.body.appendChild(l);l.click();this.byId("page").setBusy(false);l.remove();URL.revokeObjectURL(o)}}})});
sap.ui.predefine("docgenerator/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"docgenerator/i18n/i18n.properties":'# App / page\r\nappTitle=Document Generator\r\ntitle=Documents\r\ngenerateButton=Generate\r\nguidedbuyingButton=Guided Buying\r\nfieldconfigButton=Field Configuration\r\nreceivingToleranceButton=Receiving Tolerance\r\nOtherThresholdsButton=Other Thresholds\r\napprovalFlowButton=Approval Flow\r\ntaxConfigurationButton=Tax Configuration\r\n\r\n# Toolbar / buttons / tooltips\r\nsettingsTooltip=Open settings\r\n\r\n# Filter labels\r\nCustomerEditable=Customer Editable\r\nparameterName=Parameter Name\r\n\r\n# Table column headers\r\nDisplayName=Display Name\r\nParameterType=Parameter Type\r\nDefaultValue=Default Value\r\nParameterValue=Parameter Value\r\nCustomerEditableHeader=Customer Editable\r\n\r\n# Table no-data / messages (optional)\r\ntableNoData=No documents to display.\r\ntableGrowingMore=Load more\r\n\r\n# Other / descriptive text (optional)\r\ndescription=Description\r\nisDefaultText=Is Default: true\r\n\r\n# Accessibility / aria (optional)\r\nariaFilterBar=Filter Bar\r\nariaGenerateButton=Generate selected documents\r\n',
	"docgenerator/manifest.json":'{"_version":"1.76.0","sap.cloud":{"public":true,"service":"docgenerator.service"},"sap.app":{"id":"docgenerator","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.18.7","toolsId":"f2f43da3-2c67-4cf0-932f-102e38ac76be"},"dataSources":{"mainService":{"uri":"/odata/v4/generate-document/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.140.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"docgenerator.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"docgenerator.view","async":true},"routes":[{"name":"RoutePrimaryView","pattern":":?query:","target":["TargetPrimaryView"]}],"targets":{"TargetPrimaryView":{"id":"PrimaryView","name":"PrimaryView"}}},"rootView":{"viewName":"docgenerator.view.App","type":"XML","id":"App","async":true}}}',
	"docgenerator/view/App.view.xml":'<mvc:View controllerName="docgenerator.controller.App"\r\n    displayBlock="true"\r\n    xmlns:mvc="sap.ui.core.mvc"\r\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"docgenerator/view/PrimaryView.view.xml":'<mvc:View\r\n    xmlns:uxap="sap.uxap"\r\n    xmlns:smartform="sap.ui.comp.smartform"\r\n    xmlns:unified="sap.ui.unified"\r\n    xmlns:smartvariants="sap.ui.comp.smartvariants"\r\n    xmlns:f="sap.f"\r\n    xmlns:filterbar="sap.ui.comp.filterbar"\r\n    xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"\r\n    controllerName="docgenerator.controller.PrimaryView"\r\n    xmlns:mvc="sap.ui.core.mvc"\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:layout="sap.ui.layout"\r\n><f:DynamicPage\r\n        id="page"\r\n        title="{i18n>appTitle}"\r\n        headerExpanded="true"\r\n        \r\n    ><f:title><f:DynamicPageTitle><f:heading><Title\r\n                        id="pageTitle"\r\n                        text="{i18n>appTitle}"\r\n                    /></f:heading><f:actions><Button\r\n                        text="{i18n>generateButton}"\r\n                        press="onGeneratePress"\r\n                        class="sapUiSmallMarginEnd"\r\n                        icon="sap-icon://ai"\r\n                    /></f:actions></f:DynamicPageTitle></f:title><f:content><VBox\r\n                class="sapUiSmallMargin"\r\n                fitContainer="true"\r\n                renderType="Bare"\r\n            ><Panel headerText="1. Project Information"><layout:Grid\r\n                        defaultSpan="L6 M6 S12"\r\n                        class="sapUiSmallMargin"\r\n                    ><layout:content><Label text="Project Name" /><Input\r\n                                id="inpProjectName"\r\n                                placeholder="Enter Project Name"\r\n                            /><Label text="Customer Name" /><Input\r\n                                id="inpCustomerName"\r\n                                placeholder="Enter Customer Name"\r\n                            /><Label text="Customer Project ID" /><Input\r\n                                id="inpCustomerProject"\r\n                                placeholder="Enter Customer Project ID"\r\n                            /><Label text="SAP Ariba Solution" /><Input\r\n                                id="inpAribaSolution"\r\n                                placeholder="e.g. Ariba Services â€“ Buy Channel"\r\n                            /><Label text="SAP Ariba PM" /><Input\r\n                                id="inpAribaPM"\r\n                                placeholder="Project Manager Name"\r\n                            /><Label text="Customer PM" /><Input\r\n                                id="inpCustomerPM"\r\n                                placeholder="Customer Project Manager"\r\n                            /><Label text="User Story" /><TextArea\r\n                                id="inpUserStory"\r\n                                rows="3"\r\n                                width="100%"\r\n                                placeholder="Enter user story description"\r\n                            /><Label text="Realm" /><MultiComboBox\r\n                                id="inpRealm"\r\n                                selectionFinish=".onSelectRealmMulti"\r\n                            ><core:Item\r\n                                    key="BBX"\r\n                                    text="brainboxdsapp-t"\r\n                                /></MultiComboBox></layout:content></layout:Grid></Panel><Panel\r\n                    headerText="3.Ariba Config Table"\r\n                    visible="false"\r\n                    id="configTablePanel"\r\n                ><filterbar:FilterBar\r\n                        id="idsFilterBar"\r\n                        search="onFilterSearch"\r\n                        useToolbar="true"\r\n                        showRestoreButton="true"\r\n                    ><filterbar:filterGroupItems><filterbar:FilterGroupItem\r\n                                groupName="G1"\r\n                                name="isCustomerEditable"\r\n                                label="{i18n>CustomerEditable}"\r\n                                visibleInFilterBar="true"\r\n                            ><filterbar:control><MultiComboBox\r\n                                        id="isCustomerEditable"\r\n                                        items="{filter>/customerEditableOptions}"\r\n                                        selectionFinish="onCustomerEditFilterSelectionFinish"\r\n                                    ><core:Item\r\n                                            key="{filter>key}"\r\n                                            text="{filter>text}"\r\n                                        /></MultiComboBox></filterbar:control></filterbar:FilterGroupItem><filterbar:FilterGroupItem\r\n                                groupName="G2"\r\n                                name="parameterName"\r\n                                label="{i18n>parameterName}"\r\n                                visibleInFilterBar="true"\r\n                            ><filterbar:control><MultiComboBox\r\n                                        id="parameterName"\r\n                                        items="{filter>/parameterNameOptions}"\r\n                                        selectionFinish="onParamNameFilterSelectionFinish"\r\n                                    ><core:Item\r\n                                            key="{filter>key}"\r\n                                            text="{filter>text}"\r\n                                        /></MultiComboBox></filterbar:control></filterbar:FilterGroupItem></filterbar:filterGroupItems></filterbar:FilterBar><VBox fitContainer="true"><OverflowToolbar style="Clear"><Title\r\n                                id="docTitle"\r\n                                text="{i18n>title}"\r\n                            /><ToolbarSpacer /><Button\r\n                                text="{i18n>generateButton}"\r\n                                press="onGeneratePress"\r\n                                class="sapUiSmallMarginEnd"\r\n                                icon="sap-icon://ai"\r\n                            /></OverflowToolbar><Table\r\n                            id="idDocTable"\r\n                            items="{docs>/items}"\r\n                            inset="false"\r\n                            growing="true"\r\n                            growingThreshold="10"\r\n                            mode="MultiSelect"\r\n                            bindingContexts="/generate(...)"\r\n                        ><columns><Column><Text text="{i18n>DisplayName}" /></Column><Column><Text text="{i18n>ParameterType}" /></Column><Column><Text text="{i18n>DefaultValue}" /></Column><Column><Text text="{i18n>ParameterValue}" /></Column><Column><Text text="{i18n>CustomerEditable}" /></Column></columns><items><ColumnListItem><cells><ObjectIdentifier\r\n                                            title="{= ${docs>displayName} ? ${docs>displayName} : ${docs>parameterName}}"\r\n                                            text="{docs>parameterName}"\r\n                                            titleActive="true"\r\n                                        /><Text text="{docs>parameterType}" /><Text text="{docs>defaultValue}" /><Text text="{docs>parameterValue}" /><Text\r\n                                            text="{docs>isCustomerEditable}"\r\n                                        /></cells></ColumnListItem></items></Table></VBox></Panel></VBox></f:content></f:DynamicPage></mvc:View>\r\n'
});
//# sourceMappingURL=Component-preload.js.map
